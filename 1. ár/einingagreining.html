<!DOCTYPE html>
<html lang="is">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Einingagreining - Kvenno Efnafr√¶√∞i</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --kvenno-orange: #f36b22;
            --kvenno-orange-dark: #d95a1a;
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: #f9fafb;
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        .site-header {
            background: white;
            border-bottom: 2px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .site-logo {
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--kvenno-orange);
            text-decoration: none;
        }

        .site-logo:hover {
            color: var(--kvenno-orange-dark);
        }

        .header-btn {
            background: white;
            border: 2px solid var(--kvenno-orange);
            color: var(--kvenno-orange);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 0.5rem;
        }

        .header-btn:hover {
            background: var(--kvenno-orange);
            color: white;
        }

        .breadcrumb {
            color: #6b7280;
            font-size: 0.875rem;
            padding: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .breadcrumb a {
            color: var(--kvenno-orange);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .back-btn {
            background: white;
            border: 2px solid var(--kvenno-orange);
            color: var(--kvenno-orange);
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            font-size: 0.875rem;
            margin: 0 1rem 1rem 1rem;
        }

        .back-btn:hover {
            background: var(--kvenno-orange);
            color: white;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <!-- Site Header -->
    <header class="site-header">
        <div class="header-content">
            <a href="/" class="site-logo">Kvenno Efnafr√¶√∞i</a>
            <div class="header-actions">
                <button class="header-btn" onclick="alert('Stj√≥rnendaa√∞gangur √≠ √ær√≥un')">Stj√≥rnandi</button>
                <button class="header-btn" onclick="alert('Hj√°lp og uppl√Ωsingar um leikina')">Uppl√Ωsingar</button>
            </div>
        </div>
    </header>

    <!-- Breadcrumbs -->
    <div class="breadcrumb">
        <a href="/">Heim</a> > <a href="/1-ar/">1. √°r</a> > <a href="/1-ar/games/">Leikir</a> > <span>Einingagreining</span>
    </div>

    <!-- Back Button -->
    <div class="nav-container">
        <a href="/1-ar/games/" class="back-btn">
            <span>‚Üê</span>
            <span>Til baka</span>
        </a>
    </div>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Icon components
        const Timer = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="13" r="9"></circle>
                <polyline points="12 7 12 13 15 15"></polyline>
                <path d="M10 2h4"></path>
            </svg>
        );

        const Zap = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
        );

        const Trophy = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
        );

        const HelpCircle = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
        );

        const RotateCcw = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="1 4 1 10 7 10"></polyline>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
        );

        const conversionTemplates = [
            // Easy
            { category: 'Massi / Mass', fromUnit: 'g', toUnit: 'kg', factor: 0.001, difficulty: 'easy' },
            { category: 'Massi / Mass', fromUnit: 'kg', toUnit: 'g', factor: 1000, difficulty: 'easy' },
            { category: 'R√∫mm√°l / Volume', fromUnit: 'mL', toUnit: 'L', factor: 0.001, difficulty: 'easy' },
            { category: 'R√∫mm√°l / Volume', fromUnit: 'L', toUnit: 'mL', factor: 1000, difficulty: 'easy' },
            { category: 'Hiti / Temperature', fromUnit: '¬∞C', toUnit: 'K', factor: 1, difficulty: 'easy' },
            { category: 'Lengd / Length', fromUnit: 'cm', toUnit: 'm', factor: 0.01, difficulty: 'easy' },
            { category: 'Lengd / Length', fromUnit: 'm', toUnit: 'cm', factor: 100, difficulty: 'easy' },
            
            // Medium
            { category: 'Massi / Mass', fromUnit: 'mg', toUnit: 'g', factor: 0.001, difficulty: 'medium' },
            { category: 'Massi / Mass', fromUnit: 'g', toUnit: 'mg', factor: 1000, difficulty: 'medium' },
            { category: 'R√∫mm√°l / Volume', fromUnit: 'cm¬≥', toUnit: 'mL', factor: 1, difficulty: 'medium' },
            { category: 'Lengd / Length', fromUnit: 'mm', toUnit: 'cm', factor: 0.1, difficulty: 'medium' },
            { category: 'Lengd / Length', fromUnit: 'nm', toUnit: 'Œºm', factor: 0.001, difficulty: 'medium' },
            { category: 'Hiti / Temperature', fromUnit: 'K', toUnit: '¬∞C', factor: 1, difficulty: 'medium' },
            
            // Hard
            { category: 'Massi / Mass', fromUnit: 'Œºg', toUnit: 'kg', factor: 0.000000001, difficulty: 'hard', 
                steps: ['Œºg ‚Üí mg (√∑1000)', 'mg ‚Üí g (√∑1000)', 'g ‚Üí kg (√∑1000)'] },
            { category: 'Massi / Mass', fromUnit: 'kg', toUnit: 'mg', factor: 1000000, difficulty: 'hard',
                steps: ['kg ‚Üí g (√ó1000)', 'g ‚Üí mg (√ó1000)'] },
            { category: 'R√∫mm√°l / Volume', fromUnit: 'ŒºL', toUnit: 'L', factor: 0.000001, difficulty: 'hard',
                steps: ['ŒºL ‚Üí mL (√∑1000)', 'mL ‚Üí L (√∑1000)'] },
            { category: 'Lengd / Length', fromUnit: 'nm', toUnit: 'm', factor: 0.000000001, difficulty: 'hard',
                steps: ['nm ‚Üí Œºm (√∑1000)', 'Œºm ‚Üí mm (√∑1000)', 'mm ‚Üí m (√∑1000)'] },
            { category: 'R√∫mm√°l / Volume', fromUnit: 'cm¬≥', toUnit: 'm¬≥', factor: 0.000001, difficulty: 'hard',
                steps: ['cm¬≥ ‚Üí m¬≥ (√∑1000000)'] },
        ];

        const UnitConversionRace = () => {
            const [gameState, setGameState] = useState({
                currentQuestion: null,
                userAnswer: '',
                score: 0,
                questionsAnswered: 0,
                correctAnswers: 0,
                timeRemaining: 60,
                isPlaying: false,
                gameOver: false,
                difficulty: 'mixed',
                showFeedback: false,
                lastAnswerCorrect: null,
                streak: 0,
                bestStreak: 0
            });

            const [showInstructions, setShowInstructions] = useState(true);
            const inputRef = useRef(null);
            const timerRef = useRef(null);

            const generateQuestion = (difficulty) => {
                let availableTemplates;
                
                if (difficulty === 'mixed') {
                    availableTemplates = conversionTemplates;
                } else {
                    availableTemplates = conversionTemplates.filter(t => t.difficulty === difficulty);
                }

                const template = availableTemplates[Math.floor(Math.random() * availableTemplates.length)];
                
                let value;
                if (template.difficulty === 'easy') {
                    value = Math.floor(Math.random() * 900) + 100;
                } else if (template.difficulty === 'medium') {
                    value = Math.floor(Math.random() * 9000) + 1000;
                } else {
                    value = Math.floor(Math.random() * 90000) + 10000;
                }

                let answer;
                if (template.fromUnit === '¬∞C' && template.toUnit === 'K') {
                    answer = parseFloat((value + 273.15).toFixed(2));
                } else if (template.fromUnit === 'K' && template.toUnit === '¬∞C') {
                    answer = parseFloat((value - 273.15).toFixed(2));
                } else {
                    answer = parseFloat((value * template.factor).toFixed(6));
                }

                return {
                    id: Math.random().toString(36).substr(2, 9),
                    category: template.category,
                    question: `${value} ${template.fromUnit} = ? ${template.toUnit}`,
                    value,
                    fromUnit: template.fromUnit,
                    toUnit: template.toUnit,
                    answer,
                    conversionFactor: template.factor,
                    difficulty: template.difficulty,
                    steps: template.steps
                };
            };

            const startGame = () => {
                const firstQuestion = generateQuestion(gameState.difficulty);
                setGameState(prev => ({
                    ...prev,
                    currentQuestion: firstQuestion,
                    userAnswer: '',
                    score: 0,
                    questionsAnswered: 0,
                    correctAnswers: 0,
                    timeRemaining: 60,
                    isPlaying: true,
                    gameOver: false,
                    showFeedback: false,
                    lastAnswerCorrect: null,
                    streak: 0
                }));
            };

            const checkAnswer = () => {
                if (!gameState.currentQuestion || !gameState.userAnswer.trim()) return;

                const userValue = parseFloat(gameState.userAnswer);
                const correctAnswer = gameState.currentQuestion.answer;
                
                const tolerance = Math.abs(correctAnswer * 0.001) || 0.01;
                const isCorrect = Math.abs(userValue - correctAnswer) <= tolerance;

                const pointValue = gameState.currentQuestion.difficulty === 'easy' ? 10 : 
                                gameState.currentQuestion.difficulty === 'medium' ? 15 : 20;
                
                const streakBonus = gameState.streak >= 3 ? 5 : 0;
                const timeBonus = gameState.timeRemaining > 45 ? 5 : gameState.timeRemaining > 30 ? 3 : 0;

                setGameState(prev => ({
                    ...prev,
                    score: isCorrect ? prev.score + pointValue + streakBonus + timeBonus : prev.score,
                    questionsAnswered: prev.questionsAnswered + 1,
                    correctAnswers: isCorrect ? prev.correctAnswers + 1 : prev.correctAnswers,
                    showFeedback: true,
                    lastAnswerCorrect: isCorrect,
                    streak: isCorrect ? prev.streak + 1 : 0,
                    bestStreak: isCorrect && prev.streak + 1 > prev.bestStreak ? prev.streak + 1 : prev.bestStreak
                }));

                setTimeout(() => {
                    if (gameState.timeRemaining > 0) {
                        const nextQuestion = generateQuestion(gameState.difficulty);
                        setGameState(prev => ({
                            ...prev,
                            currentQuestion: nextQuestion,
                            userAnswer: '',
                            showFeedback: false,
                            lastAnswerCorrect: null
                        }));
                        inputRef.current?.focus();
                    }
                }, 1500);
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !gameState.showFeedback) {
                    checkAnswer();
                }
            };

            const resetGame = () => {
                if (timerRef.current) clearInterval(timerRef.current);
                setGameState(prev => ({
                    ...prev,
                    currentQuestion: null,
                    userAnswer: '',
                    score: 0,
                    questionsAnswered: 0,
                    correctAnswers: 0,
                    timeRemaining: 60,
                    isPlaying: false,
                    gameOver: false,
                    showFeedback: false,
                    lastAnswerCorrect: null,
                    streak: 0
                }));
            };

            useEffect(() => {
                if (gameState.isPlaying && !gameState.gameOver && gameState.timeRemaining > 0) {
                    timerRef.current = setInterval(() => {
                        setGameState(prev => {
                            if (prev.timeRemaining <= 1) {
                                return { ...prev, timeRemaining: 0, isPlaying: false, gameOver: true };
                            }
                            return { ...prev, timeRemaining: prev.timeRemaining - 1 };
                        });
                    }, 1000);
                }

                return () => {
                    if (timerRef.current) clearInterval(timerRef.current);
                };
            }, [gameState.isPlaying, gameState.gameOver, gameState.timeRemaining]);

            useEffect(() => {
                if (gameState.isPlaying && !gameState.showFeedback) {
                    inputRef.current?.focus();
                }
            }, [gameState.isPlaying, gameState.showFeedback, gameState.currentQuestion]);

            if (showInstructions) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 p-8">
                        <div className="max-w-2xl mx-auto bg-white rounded-2xl shadow-2xl p-8">
                            <h1 className="text-4xl font-bold text-center mb-6 text-purple-600">
                                ‚ö° Unit Conversion Race
                            </h1>
                            
                            <div className="space-y-4 text-gray-700">
                                <h2 className="text-2xl font-semibold text-purple-500">Lei√∞beiningar / Instructions</h2>
                                
                                <div className="bg-purple-50 p-4 rounded-lg">
                                    <h3 className="font-semibold mb-2">Markmi√∞ / Goal:</h3>
                                    <p>Umbreyttu einingum eins hratt og √æ√∫ getur √° 60 sek√∫ndum!</p>
                                    <p className="text-sm italic">Convert units as fast as you can in 60 seconds!</p>
                                </div>

                                <div className="bg-blue-50 p-4 rounded-lg">
                                    <h3 className="font-semibold mb-2">Hvernig √° a√∞ spila / How to play:</h3>
                                    <ol className="list-decimal list-inside space-y-2">
                                        <li>Veldu erfi√∞leikastig / Choose difficulty level</li>
                                        <li>Lestu spurninguna og reikna√∞u / Read the question and calculate</li>
                                        <li>Sl√°√∞u inn svari√∞ / Type your answer</li>
                                        <li>√ùttu √° Enter e√∞a "Athuga" / Press Enter or "Check"</li>
                                        <li>Haltu √°fram √æar til t√≠minn rennur √∫t! / Keep going until time runs out!</li>
                                    </ol>
                                </div>

                                <div className="bg-green-50 p-4 rounded-lg">
                                    <h3 className="font-semibold mb-2">Stigagj√∂f / Scoring:</h3>
                                    <ul className="space-y-1">
                                        <li><strong>Au√∞velt/Easy:</strong> 10 stig √° spurning</li>
                                        <li><strong>Mi√∞lungs/Medium:</strong> 15 stig √° spurning</li>
                                        <li><strong>Erfitt/Hard:</strong> 20 stig √° spurning</li>
                                        <li><strong>R√∂√∞ b√≥nus/Streak bonus:</strong> +5 stig eftir 3 √≠ r√∂√∞ r√©tt</li>
                                        <li><strong>T√≠ma b√≥nus/Time bonus:</strong> +3-5 stig fyrir hra√∞a sv√∂r</li>
                                    </ul>
                                </div>

                                <div className="bg-yellow-50 p-4 rounded-lg">
                                    <h3 className="font-semibold mb-2">√Åbendingar / Tips:</h3>
                                    <ul className="list-disc list-inside space-y-1 text-sm">
                                        <li>Fyrir ¬∞C ‚Üí K: b√¶ttu vi√∞ 273.15</li>
                                        <li>Fyrir K ‚Üí ¬∞C: drag√∞u fr√° 273.15</li>
                                        <li>Fyrir a√∞rar umbreytingar: margfalda√∞u e√∞a deildu</li>
                                        <li>Nota√∞u v√≠sindalega rith√¶tti fyrir mj√∂g litlar/st√≥rar t√∂lur</li>
                                    </ul>
                                </div>

                                <div className="bg-pink-50 p-4 rounded-lg">
                                    <h3 className="font-semibold mb-2">Algengar umbreytingar / Common conversions:</h3>
                                    <div className="text-sm grid grid-cols-2 gap-2">
                                        <div>1 kg = 1000 g</div>
                                        <div>1 L = 1000 mL</div>
                                        <div>1 m = 100 cm</div>
                                        <div>1 g = 1000 mg</div>
                                        <div>1 cm¬≥ = 1 mL</div>
                                        <div>1 m = 1000 mm</div>
                                    </div>
                                </div>
                            </div>

                            <button
                                onClick={() => setShowInstructions(false)}
                                className="w-full mt-6 bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 px-6 rounded-xl transition-colors duration-200 text-lg"
                            >
                                Byrja a√∞ spila / Start Playing! üöÄ
                            </button>
                        </div>
                    </div>
                );
            }

            if (!gameState.isPlaying && !gameState.gameOver) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 p-8">
                        <div className="max-w-2xl mx-auto bg-white rounded-2xl shadow-2xl p-8">
                            <h1 className="text-4xl font-bold text-center mb-6 text-purple-600">
                                ‚ö° Unit Conversion Race
                            </h1>

                            <div className="space-y-6">
                                <div className="text-center">
                                    <p className="text-lg text-gray-700 mb-4">
                                        Veldu erfi√∞leikastig / Choose your difficulty:
                                    </p>
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <button
                                        onClick={() => {
                                            setGameState(prev => ({ ...prev, difficulty: 'easy' }));
                                            setTimeout(startGame, 100);
                                        }}
                                        className="bg-green-500 hover:bg-green-600 text-white font-bold py-6 px-6 rounded-xl transition-colors"
                                    >
                                        <div className="text-2xl mb-2">üòä</div>
                                        <div className="text-xl">Au√∞velt</div>
                                        <div className="text-sm opacity-90">Easy</div>
                                        <div className="text-xs mt-2">Einfaldar umbreytingar</div>
                                    </button>

                                    <button
                                        onClick={() => {
                                            setGameState(prev => ({ ...prev, difficulty: 'medium' }));
                                            setTimeout(startGame, 100);
                                        }}
                                        className="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-6 px-6 rounded-xl transition-colors"
                                    >
                                        <div className="text-2xl mb-2">ü§î</div>
                                        <div className="text-xl">Mi√∞lungs</div>
                                        <div className="text-sm opacity-90">Medium</div>
                                        <div className="text-xs mt-2">Fleiri decimals</div>
                                    </button>

                                    <button
                                        onClick={() => {
                                            setGameState(prev => ({ ...prev, difficulty: 'hard' }));
                                            setTimeout(startGame, 100);
                                        }}
                                        className="bg-red-500 hover:bg-red-600 text-white font-bold py-6 px-6 rounded-xl transition-colors"
                                    >
                                        <div className="text-2xl mb-2">üò∞</div>
                                        <div className="text-xl">Erfitt</div>
                                        <div className="text-sm opacity-90">Hard</div>
                                        <div className="text-xs mt-2">Marg√ærepa umbreytingar</div>
                                    </button>

                                    <button
                                        onClick={() => {
                                            setGameState(prev => ({ ...prev, difficulty: 'mixed' }));
                                            setTimeout(startGame, 100);
                                        }}
                                        className="bg-purple-500 hover:bg-purple-600 text-white font-bold py-6 px-6 rounded-xl transition-colors"
                                    >
                                        <div className="text-2xl mb-2">üé≤</div>
                                        <div className="text-xl">Blanda√∞</div>
                                        <div className="text-sm opacity-90">Mixed</div>
                                        <div className="text-xs mt-2">√ñll stig</div>
                                    </button>
                                </div>

                                <button
                                    onClick={() => setShowInstructions(true)}
                                    className="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-colors"
                                >
                                    üìñ Sj√° lei√∞beiningar / View Instructions
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (gameState.gameOver) {
                const accuracy = gameState.questionsAnswered > 0 
                    ? ((gameState.correctAnswers / gameState.questionsAnswered) * 100).toFixed(1)
                    : '0';

                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 p-8">
                        <div className="max-w-2xl mx-auto bg-white rounded-2xl shadow-2xl p-8">
                            <h1 className="text-4xl font-bold text-center mb-6 text-purple-600">
                                üèÅ Leik loki√∞ / Game Over!
                            </h1>

                            <div className="space-y-6">
                                <div className="bg-gradient-to-r from-purple-100 to-pink-100 p-6 rounded-xl">
                                    <div className="text-center">
                                        <div className="text-6xl font-bold text-purple-600 mb-2">{gameState.score}</div>
                                        <div className="text-xl text-gray-700">Heildarsta√∞a / Total Score</div>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <div className="bg-blue-50 p-4 rounded-xl text-center">
                                        <div className="text-3xl font-bold text-blue-600">{gameState.questionsAnswered}</div>
                                        <div className="text-sm text-gray-700">Spurningar / Questions</div>
                                    </div>

                                    <div className="bg-green-50 p-4 rounded-xl text-center">
                                        <div className="text-3xl font-bold text-green-600">{gameState.correctAnswers}</div>
                                        <div className="text-sm text-gray-700">R√©tt / Correct</div>
                                    </div>

                                    <div className="bg-yellow-50 p-4 rounded-xl text-center">
                                        <div className="text-3xl font-bold text-yellow-600">{accuracy}%</div>
                                        <div className="text-sm text-gray-700">N√°kv√¶mni / Accuracy</div>
                                    </div>

                                    <div className="bg-orange-50 p-4 rounded-xl text-center">
                                        <div className="text-3xl font-bold text-orange-600">{gameState.bestStreak}</div>
                                        <div className="text-sm text-gray-700">Besta r√∂√∞ / Best Streak</div>
                                    </div>
                                </div>

                                <div className="bg-purple-50 p-4 rounded-xl">
                                    <h3 className="font-semibold text-center mb-2">
                                        {gameState.score >= 300 ? 'üåü Fr√°b√¶rt! / Excellent!' :
                                        gameState.score >= 200 ? 'üëç Vel gert! / Well done!' :
                                        gameState.score >= 100 ? 'üí™ G√≥√∞ byrjun! / Good start!' :
                                        'üìö √Üf√∞u meira! / Keep practicing!'}
                                    </h3>
                                    <p className="text-center text-sm text-gray-700">
                                        {gameState.score >= 300 ? '√û√∫ ert snillingur √≠ einingaumbreytingum!' :
                                        gameState.score >= 200 ? '√û√∫ ert a√∞ fara vel me√∞ √æetta!' :
                                        gameState.score >= 100 ? 'Haltu √°fram a√∞ √¶fa!' :
                                        'Pr√≥fa√∞u a√∞ byrja √° au√∞veldu stigi!'}
                                    </p>
                                </div>

                                <div className="flex gap-4">
                                    <button
                                        onClick={resetGame}
                                        className="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-6 rounded-xl transition-colors flex items-center justify-center gap-2"
                                    >
                                        <RotateCcw size={20} />
                                        Spila aftur / Play Again
                                    </button>
                                    <button
                                        onClick={() => setShowInstructions(true)}
                                        className="flex-1 bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 px-6 rounded-xl transition-colors flex items-center justify-center gap-2"
                                    >
                                        <HelpCircle size={20} />
                                        Lei√∞beiningar / Instructions
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 p-4 md:p-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-2xl shadow-2xl p-6 mb-6">
                            <div className="flex justify-between items-center flex-wrap gap-4">
                                <div className="flex items-center gap-4">
                                    <div className="text-center">
                                        <div className="flex items-center gap-2 text-red-600 mb-1">
                                            <Timer size={24} />
                                            <span className="text-3xl font-bold">{gameState.timeRemaining}s</span>
                                        </div>
                                        <div className="text-xs text-gray-600">T√≠mi eftir / Time left</div>
                                    </div>

                                    <div className="text-center">
                                        <div className="flex items-center gap-2 text-purple-600 mb-1">
                                            <Trophy size={24} />
                                            <span className="text-3xl font-bold">{gameState.score}</span>
                                        </div>
                                        <div className="text-xs text-gray-600">Stig / Score</div>
                                    </div>
                                </div>

                                <div className="flex items-center gap-4">
                                    <div className="text-center">
                                        <div className="text-2xl font-bold text-green-600">
                                            {gameState.correctAnswers}/{gameState.questionsAnswered}
                                        </div>
                                        <div className="text-xs text-gray-600">R√©tt / Correct</div>
                                    </div>

                                    {gameState.streak >= 3 && (
                                        <div className="text-center animate-pulse">
                                            <div className="flex items-center gap-1 text-orange-600 mb-1">
                                                <Zap size={20} />
                                                <span className="text-2xl font-bold">{gameState.streak}</span>
                                            </div>
                                            <div className="text-xs text-gray-600">Streak! üî•</div>
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div className="mt-4 bg-gray-200 rounded-full h-2">
                                <div 
                                    className="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-1000"
                                    style={{ width: `${(gameState.timeRemaining / 60) * 100}%` }}
                                />
                            </div>
                        </div>

                        <div className="bg-white rounded-2xl shadow-2xl p-8">
                            {gameState.currentQuestion && (
                                <>
                                    <div className="mb-6">
                                        <div className="inline-block bg-purple-100 px-4 py-2 rounded-full text-sm font-semibold text-purple-700 mb-4">
                                            {gameState.currentQuestion.category}
                                        </div>
                                        
                                        <div className="text-center">
                                            <div className="text-4xl md:text-5xl font-bold text-gray-800 mb-2">
                                                {gameState.currentQuestion.value} {gameState.currentQuestion.fromUnit}
                                            </div>
                                            <div className="text-3xl text-purple-600 mb-2">=</div>
                                            <div className="text-4xl md:text-5xl font-bold text-gray-800">
                                                ? {gameState.currentQuestion.toUnit}
                                            </div>
                                        </div>
                                    </div>

                                    {gameState.currentQuestion.steps && (
                                        <div className="mb-4 bg-yellow-50 border border-yellow-200 p-3 rounded-lg">
                                            <div className="text-xs font-semibold text-yellow-800 mb-1">Skref / Steps:</div>
                                            <div className="text-xs text-yellow-700">
                                                {gameState.currentQuestion.steps.join(' ‚Üí ')}
                                            </div>
                                        </div>
                                    )}

                                    <div className="max-w-md mx-auto">
                                        {!gameState.showFeedback ? (
                                            <div className="space-y-4">
                                                <input
                                                    ref={inputRef}
                                                    type="number"
                                                    step="any"
                                                    value={gameState.userAnswer}
                                                    onChange={(e) => setGameState(prev => ({ ...prev, userAnswer: e.target.value }))}
                                                    onKeyPress={handleKeyPress}
                                                    placeholder="Sl√°√∞u inn svar / Enter answer"
                                                    className="w-full p-4 text-2xl border-4 border-purple-300 rounded-xl focus:border-purple-500 focus:outline-none text-center font-bold"
                                                    autoFocus
                                                />
                                                <button
                                                    onClick={checkAnswer}
                                                    disabled={!gameState.userAnswer.trim()}
                                                    className="w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-4 px-6 rounded-xl transition-colors text-xl"
                                                >
                                                    Athuga svar / Check Answer ‚úì
                                                </button>
                                            </div>
                                        ) : (
                                            <div className={`p-6 rounded-xl ${gameState.lastAnswerCorrect ? 'bg-green-50 border-4 border-green-300' : 'bg-red-50 border-4 border-red-300'}`}>
                                                <div className="text-center">
                                                    <div className="text-4xl mb-2">
                                                        {gameState.lastAnswerCorrect ? '‚úÖ' : '‚ùå'}
                                                    </div>
                                                    <div className="text-2xl font-bold mb-2">
                                                        {gameState.lastAnswerCorrect ? 'R√©tt! / Correct!' : 'Rangt / Incorrect'}
                                                    </div>
                                                    <div className="text-lg text-gray-700">
                                                        R√©tt svar / Correct answer: <span className="font-bold">{gameState.currentQuestion.answer}</span>
                                                    </div>
                                                    {!gameState.lastAnswerCorrect && (
                                                        <div className="text-sm text-gray-600 mt-2">
                                                            √ûitt svar / Your answer: {gameState.userAnswer}
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </>
                            )}
                        </div>

                        <div className="mt-6 flex gap-4 justify-center">
                            <button
                                onClick={() => setShowInstructions(true)}
                                className="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors flex items-center gap-2"
                            >
                                <HelpCircle size={20} />
                                Hj√°lp / Help
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<UnitConversionRace />, document.getElementById('root'));
    </script>
</body>
</html>
